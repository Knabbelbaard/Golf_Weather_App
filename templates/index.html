<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golf Weer App</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1 class="center-title">ðŸŒ¤ Golf Weer App</h1>

    <div class="flex-row">
        <div class="container">
            <form method="post" class="main-form">
                <input
                    type="text"
                    name="city"
                    value="{{ city or '' }}"
                    placeholder="Enter city name"
                />

                <input
                    type="text"
                    name="stock-distance"
                    value="{{ stock_distance or '' }}"
                    placeholder="Enter your stock distance"
                />

                <select name="hitting-direction">
                    <option value="" {% if not hitting_direction %}selected{% endif %} hidden>Hitting direction</option>
                    {% for d in ["N","NE","E","SE","S","SW","W","NW"] %}
                    <option value="{{ d }}" {% if hitting_direction == d %}selected{% endif %}>{{ d }}</option>
                    {% endfor %}
                </select>

                <button type="submit" name="action" value="update_weather">Update Weather</button>
                <button type="submit" name="action" value="calculate">Calculate</button>
            </form>

            {% if weather %}
            <div class="weather-card">
                <div class="weather-item"><strong>Temperature:</strong> {{ weather.temperature }} Â°C</div>
                <div class="weather-item"><strong>Humidity:</strong> {{ weather.humidity }} %</div>
                <div class="weather-item"><strong>Rain:</strong> {{ weather.rain }} mm</div>
                <div class="weather-item"><strong>Wind direction:</strong> {{ weather.wind_direction_str }}</div>
                <div class="weather-item"><strong>Wind direction (Â°):</strong> {{ weather.wind_direction_deg }}</div>
                <div class="weather-item"><strong>Wind speed:</strong> {{ weather.wind_speed }} km/h</div>
                <div class="weather-item"><strong>Wind gust:</strong> {{ weather.wind_gust }} km/h</div>
                <div class="weather-item"><strong>Time:</strong> {{ weather.time }}</div>
            </div>
            {% endif %}
        </div>

        <div class="container">
            {% if adjusted %}
            <div class="weather-card">
                <div class="weather-item"><strong>Adjusted distance:</strong> {{ adjusted.adjusted_distance_total }}</div>
                <div class="weather-item"><strong>Adjustment:</strong> {{ adjusted.adjust_percent }} %</div>
                <div class="weather-item"><strong>Wind along shot:</strong> {{ adjusted.wind_component_kmh }} km/h</div>
                <div class="weather-item"><strong>Angle difference (wind to vs shot):</strong> {{ adjusted.angle_diff_deg }}Â°</div>
            </div>
            {% endif %}
        </div>
    </div>
</body>
</html>
